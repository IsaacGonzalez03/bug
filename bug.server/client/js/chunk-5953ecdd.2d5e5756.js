(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5953ecdd"],{"68bc":function(t,e,a){"use strict";a.r(e);var c=a("7a23");const s=Object(c["F"])("data-v-1b6ac130");Object(c["t"])("data-v-1b6ac130");const i={key:0},d={key:1,class:"container-fluid bg-secondary"},n={class:"row justify-content-center"},o={class:"col-11"},u={class:"card my-3 bg-primary"},g={class:"card-header"},b={key:0},r={class:"text-success text-shadow"},l={key:1,class:"py-1 my-1 text-success text-shadow"},j={key:2,class:"py-1 my-1 text-danger text-shadow"},O={class:"card-body p-2"},p={key:0,class:"p-3"},B={key:3},y={class:"card-footer"},v={class:"d-flex"},w={class:"m-1 "},m={class:"text-end"},f={class:"row justify-content-center"},h={class:"col-11"},k=Object(c["g"])("button",{type:"submit",class:"btn btn-success cursor",id:"button-addon2",title:"send note"},[Object(c["g"])("i",{class:"fas fa-paper-plane"})],-1);Object(c["r"])();const x=s((t,e,a,s,x,q)=>{const N=Object(c["x"])("Note");return!0===s.state.rendering?(Object(c["q"])(),Object(c["d"])("div",i)):(Object(c["q"])(),Object(c["d"])("div",d,[Object(c["g"])("div",n,[Object(c["g"])("div",o,[Object(c["g"])("div",u,[Object(c["g"])("div",g,[s.state.activeBug.creator.id===s.state.account.id?(Object(c["q"])(),Object(c["d"])("div",b,[0==s.state.activeBug.closed?(Object(c["q"])(),Object(c["d"])("i",{key:0,onClick:e[1]||(e[1]=(...t)=>s.deleteBug&&s.deleteBug(...t)),class:"fas fa-archive float-right text-danger text-shadow",title:"Close Bug"})):Object(c["e"])("",!0)])):Object(c["e"])("",!0),Object(c["g"])("h1",r,Object(c["z"])(s.state.activeBug.title),1),0==s.state.activeBug.closed?(Object(c["q"])(),Object(c["d"])("h4",l," Open ")):(Object(c["q"])(),Object(c["d"])("h4",j," Closed "))]),Object(c["g"])("div",O,[!1===s.state.edit?(Object(c["q"])(),Object(c["d"])("p",p,Object(c["z"])(s.state.activeBug.description),1)):Object(c["D"])((Object(c["q"])(),Object(c["d"])("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>s.state.newBug.description=t),placeholder:"edit description..."},null,512)),[[c["B"],s.state.newBug.description]]),s.state.activeBug.creator.id===s.state.account.id&&0==s.state.activeBug.closed?(Object(c["q"])(),Object(c["d"])("i",{key:2,class:"far fa-edit float-right",onClick:e[3]||(e[3]=t=>s.state.edit=!0)})):Object(c["e"])("",!0),!0===s.state.edit?(Object(c["q"])(),Object(c["d"])("div",B,[Object(c["g"])("button",{type:"button",class:"btn btn-danger",onClick:e[4]||(e[4]=t=>s.state.edit=!1)}," Go Back "),Object(c["g"])("button",{type:"button",class:"btn btn-success",onClick:e[5]||(e[5]=(...t)=>s.editBug&&s.editBug(...t))}," Save ")])):Object(c["e"])("",!0)]),Object(c["g"])("div",y,[Object(c["g"])("div",v,[Object(c["g"])("img",{src:s.state.activeBug.creator.picture,class:"img-height rounded-circle img-thumbnail",alt:"User Image"},null,8,["src"]),Object(c["g"])("p",w,Object(c["z"])(s.state.activeBug.creator.name),1)]),Object(c["g"])("div",m,Object(c["z"])(new Date(s.state.activeBug.updatedAt).toLocaleString("en",s.date))+" - "+Object(c["z"])(new Date(s.state.activeBug.updatedAt).toLocaleTimeString("en",s.time)),1)])])])]),Object(c["g"])("div",f,[Object(c["g"])("div",h,[Object(c["g"])("form",{onSubmit:e[7]||(e[7]=Object(c["E"])((...t)=>s.createNote&&s.createNote(...t),["prevent"])),class:"input-group"},[Object(c["D"])(Object(c["g"])("input",{class:"form-control",type:"text",placeholder:"notes...","onUpdate:modelValue":e[6]||(e[6]=t=>s.state.newNote.body=t)},null,512),[[c["B"],s.state.newNote.body]]),k],32)])]),(Object(c["q"])(!0),Object(c["d"])(c["a"],null,Object(c["w"])(s.state.notes,t=>(Object(c["q"])(),Object(c["d"])(N,{key:t.id,note:t},null,8,["note"]))),128))]))});var q=a("a1e9"),N=a("5c40"),A=a("af90"),S=a("6c02"),I=a("83fc"),C=a("5d40"),D=a("5a80"),z={name:"BugDetailsPage",setup(){const t=Object(S["c"])(),e=Object(q["i"])({edit:!1,rendering:!0,newBug:{},newNote:{},account:Object(N["d"])(()=>I["AppState"].account),user:Object(N["d"])(()=>I["AppState"].user),activeBug:Object(N["d"])(()=>I["AppState"].activeBug),notes:Object(N["d"])(()=>I["AppState"].notes)});return Object(N["u"])(async()=>{try{await A["a"].getBugById(t.params.id),await D["a"].getNotesByBugId(t.params.id),e.rendering=!1}catch(a){C["a"].toast(a.message)}}),{state:e,async editBug(){try{e.newBug.id=e.activeBug.id,await A["a"].editBug(e.newBug),e.newBug={},e.edit=!1}catch(t){}},async createNote(){try{e.newNote.bug=t.params.id,await D["a"].createNote(e.newNote,t.params.id),e.newNote={},C["a"].toast("success","success")}catch(a){C["a"].toast(a.message)}},async deleteBug(){try{const e=confirm("Once closed, a bug cannot be reopened");!0===e&&A["a"].deleteBug(t.params.id)}catch(e){C["a"].toast(e.message)}},date:{year:"numeric",month:"2-digit",day:"2-digit"},time:{hour:"2-digit",minute:"2-digit"}}}};a("ddb2");z.render=x,z.__scopeId="data-v-1b6ac130";e["default"]=z},a35e:function(t,e,a){},af90:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var c=a("8a4e");const{AppState:s}=a("83fc"),{router:i}=a("41cb"),{api:d}=a("2b20");class n{async getAllBugs(){const t=await d.get("api/bugs");s.bugs=t.data,c["a"].log(t.data)}async filterBugs(){s.bugs=s.bugs.filter(t=>!1===t.closed)}async getBugById(t){const e=await d.get("api/bugs/"+t);s.activeBug=e.data}async createBug(t){const e=await d.post("api/bugs",t);this.getAllBugs(),i.push({name:"BugDetailsPage",params:{id:e.data.id}})}async deleteBug(t){await d.delete("api/bugs/"+t),this.getBugById(t),this.getAllBugs()}async editBug(t){delete t.closed,await d.put("api/bugs/"+t.id,t),this.getBugById(t.id)}}const o=new n},ddb2:function(t,e,a){"use strict";a("a35e")}}]);